<!DOCTYPE html>
<html>
<head>
  <title>Hacker Q</title>
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>


<script src="https://cdn.goinstant.net/v1/platform.min.js"></script>
  <script type="text/javascript">

    function onLoad() {

      var url = 'https://goinstant.net/tylersangster/hackerq';
      var platform = new goinstant.Platform(url);
      platform.connect(function (err) {
        if (err) {
          console.log('Error connecting to platform:', err);
          return;
        }

        var room = platform.room('HackerQ Room');
        room.join(function (err) {
          if (err) {
            console.log('Error connecting to room:', err);
            return;
          }

          var nameKey = room.key('/name');
          var nameInput = document.getElementById('name');

          // handle sets from remote users
          nameKey.on('set', function(value, context) {
            nameInput.value = value;
          });

          // set the value when we load
          nameKey.get(function(err, value, context) {
            nameInput.value = value;
          });

          function setName() {
            setTimeout(function() {
              // set key to the new value
              nameKey.set(nameInput.value);
            }, 0);
          }

          nameInput.addEventListener('keyup', setName);
          nameInput.addEventListener('change', setName);
        });
      });
    }

  </script>



</head>
<body onload="onLoad();">
    <label for="name">Name</label><input type="text" id="name" />
    
<div class="container-fluid">	
<div class="header">
<%= image_tag("hackerQ.png") %>
</div>

<!-- <div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <a class="brand" href="hackerQ.com">Questions</a>
    <ul class="nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">Users</a></li>
      <li><a href="#">Teachers</a></li>
    </ul>
  </div>
</div> -->

<%= yield %>
</div>
</body>
</html>
